<html>
<head>
<title>demo toan user name password</title>
</head>
<body>

<table>
        <tbody id="gameBoard"><tr><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td></tr><tr><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td></tr><tr><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td></tr><tr><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td></tr><tr><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td></tr><tr><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td></tr><tr><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td></tr><tr><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td></tr><tr><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td></tr><tr><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td></tr><tr><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td></tr><tr><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td></tr><tr><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td></tr><tr><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td></tr><tr><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td></tr><tr><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td></tr><tr><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td></tr><tr><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td></tr><tr><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td></tr><tr><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td><td class='playerBox'>.</td></tr></tbody>
</table>

<style>
	
        table{
            border-collapse: collapse;
            width: 800px;
            table-layout: fixed;
        }
        td{
            border: 1px solid black;
            width: 20px;
            height: 20px;
            padding: 5px;
            text-align: center;
        }
        td:hover{
            cursor: pointer;
        }
    
</style>
</body>
</html>
<script>

let caroArray = []; //mảng lưu trữ bàn cờ, mỗi lần player nào click vào 1 ô, sẽ lưu lại giá trị đó vào trong mảng,

for(var i =0;i< 20;i++) {
	caroArray.push(['.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.']);
}

//chi co 2 nguoi choi
let isFirstPlayer = true; //lưu giá trị để xác định người chơi 1 hay người chơi 2

//trả về kí tự của tuwngfn gười chơi, nếu người chơi 1 thì khi click ra dấu X, người chơi 2 thì khi click ra dấu O
let getLetter = function(isFirstPlayer) {
	return isFirstPlayer ? "X" : "O";
}

//đoạn này tìm các thẻ TD có thuộc tính class là playerbox, xong sau đó khai báo sự kiện onlick cho các thẻ này.
let tds = document.getElementsByClassName('playerBox');
for(let td in tds) {
	tds[td].onclick = function(){ 		//day la cho xu ly moi khi user bam click
	

		tds[td].innerText = getLetter(isFirstPlayer);
		
		isFirstPlayer = !isFirstPlayer; //đảo lượt người chơi,
		
		let boxIndex = Number(td); //giá trị index tương ứng trong mảng caroArray

		caculateWinner(boxIndex, tds[td].innerText);
	};
}



//tinh toan nguoi thang cuoc
let caculateWinner = function(boxIndex, currentLetter) {
	let winner = "";
	let rowNum =  Math.floor(boxIndex/  caroArray.length); //chỉ số hàng
	let colNum = boxIndex % 20;  //chỉ số cột. chia lấy dư cho 20 vì mình đang để bàn cờ của mình là chiều 20x20
	
	//updatePlayerBoxWhenPlayClick
	caroArray[rowNum][colNum] = currentLetter;
	
	//up //down
	winner = caculateWinnerByUpAnDownDirection(rowNum, colNum, boxIndex, currentLetter);
	
	if(winner) {
		alert(winner);
		return;
	}
	
	
	//left /right
	winner = caculateWinnerByLeftAndRightDirection(rowNum, colNum, boxIndex, currentLetter);
	if(winner) {
		alert(winner);
		return;
	}
	
	
	//forward backward
	winner = caculateWinnerByForwardAndBackwardDirection(rowNum, colNum, boxIndex, currentLetter);
	if(winner) {
		alert(winner);
		return;
	}
}


//hàm này sẽ đi theo chiều lên trên trước, xong lộn xuống dưới.
let caculateWinnerByUpAnDownDirection = function(rowNum, colNum, boxIndex, currentLetter) {
	
	let tempRowNum = rowNum;
	let point = 0;
	let goUp = true; //up is true
	let is2Times = false;
	
	//lặp nếu mà chiều đi lên và chỉ số hàng là > -1, hoặc là chiều đi xuống và chỉ số hàng nhỏ hơn 21 và đi lần thứ 2
	while((tempRowNum >= -1 && goUp) || (tempRowNum < 21 && !goUp && is2Times)) {
		if(tempRowNum != -1 && caroArray[tempRowNum][colNum] && caroArray[tempRowNum][colNum] == currentLetter) {
			point++;
		}else {
			if(is2Times) break; // nếu đã vòng lên trên và vòng xuống dưới rồi thì sẽ ko kiểm tra nữa
			
			is2Times = true;
			
			if(tempRowNum == -1) {
				goUp = !goUp;
				tempRowNum = rowNum;
			}
		}
		
		//nếu tìm đủ 5 điểm liền nhau
		if(point==5) {
			return currentLetter;
		}
		goUp ? tempRowNum-- : tempRowNum++ ;
	}
}

let caculateWinnerByLeftAndRightDirection = function(rowNum, colNum, boxIndex, currentLetter) {}

let caculateWinnerByForwardAndBackwardDirection = function(rowNum, colNum, boxIndex, currentLetter) {}
</script>